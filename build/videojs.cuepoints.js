/*! VideoJS Cuepoints plugin 2013-07-05 */
/*! Author: Carlos Galan Cladera <cgcladera@gmail.com>*/
function Cuepoint(a,b){this.player=a;var c=b||{};this.namespace=c.namespace||"",this.start=c.start||0,this.end=c.end||-1,this.startFn=c.onStart||function(){},this.endFn=c.onEnd||function(){},this.params=c.params||{}}function vjsCuepoints(a){var b=this;b.cuepoints=b.cuepoints||{},b.cuepoints.init=function(){b.cuepoints.instances=[]},b.cuepoints._addCuepoint=function(a){var c=new Cuepoint(b,a);c.activate(),b.cuepoints.instances.push(c)},b.cuepoints.init(a)}Cuepoint.prototype._process=function(){if(this.player.currentTime()>=this.start&&(this.end<0||this.player.currentTime()<this.end)){if(this.fired)return;this.fired=!0,this._start()}else{if(!this.fired)return;this.fired=!1,this._end()}},Cuepoint.prototype._start=function(){this.startFn.call(this,this.params)},Cuepoint.prototype._end=function(){this.endFn.call(this,this.params)},Cuepoint.prototype.activate=function(){var a=this;this.player.on("timeupdate",function(){a._process()})},Cuepoint.prototype.suspend=function(){this.fired=!1;var a=this;this.player.off("timeupdate",function(){a._process()})},videojs.Player.prototype.addCuepoint=function(a){return this.cuepoints._addCuepoint(a),this},videojs.plugin("cuepoints",vjsCuepoints);