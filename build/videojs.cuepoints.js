/*! VideoJS Cuepoints plugin 2013-07-17 */
/*! Author: Carlos Galan Cladera <cgcladera@gmail.com>*/
function Cuepoint(c,b){this.player=c;var a=b||{};this.namespace=a.namespace||"";this.start=a.start||0;this.end=a.end||-1;this.startFn=a.onStart||function(){};this.endFn=a.onEnd||function(){};this.params=a.params||{};this.fired=!1}Cuepoint.prototype._process=function(){this.player.currentTime()>=this.start&&(0>this.end||this.player.currentTime()<this.end)?this.fired||(this.fired=!0,this._start()):this.fired&&(this.fired=!1,this._end())};Cuepoint.prototype.start=0;Cuepoint.prototype.end=-1;Cuepoint.prototype._start=function(){this.startFn.call(this,this.params)};Cuepoint.prototype._end=function(){this.endFn.call(this,this.params)};Cuepoint.prototype.activate=function(){var c=this;this.processHandler=function(){c._process()};this.player.on("timeupdate",this.processHandler)};Cuepoint.prototype.suspend=function(){this.fired=!1;this.player.off("timeupdate",this.processHandler)};Cuepoint.prototype.destroy=function(){this.player.off("timeupdate",this.processHandler)};function vjsCuepoints(c){var b=this;b.cuepoints=b.cuepoints||{};b.cuepoints.init=function(a){b.cuepoints.instances=[]};b.cuepoints.destroy=function(){for(var a=0,c=b.cuepoints.instances.length;a<c;a++)b.cuepoints.instances[a].destroy(),b.cuepoints.instances[a]=null;b.cuepoints.instances=null};b.cuepoints._addCuepoint=function(a){a=new Cuepoint(b,a);a.activate();b.cuepoints.instances.push(a);return a};b.cuepoints.init(c)}videojs.Player.prototype.addCuepoint=function(c){return this.cuepoints._addCuepoint(c)};videojs.Player.prototype.destroyCuepoints=function(){return this.cuepoints.destroy()};videojs.plugin("cuepoints",vjsCuepoints);